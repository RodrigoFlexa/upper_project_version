 <!--Header-->
<div class="d-flex justify-content-between align-items-center mt-4">
  <h1>Anamnese</h1>

  <button class="btn btn-primary custom-button "
    (click)="voltarPraatendimento(cliente)">
    <i class="fas fa-arrow-left"></i> Voltar
  </button>

</div>


<div class="row">
  <!-- Formulário -->

  <div class="col-md-8 d-flex flex-column">

    <div class="card">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mt-4">
          <h3>Formulário Anamnese</h3>
          <button class="btn btn-primary custom-edit-button" type="button">
            <i class="fas fa-pencil-alt"></i> Editar
          </button>
        </div>

        <br>
        <!-- Adicione a div com a barra de rolagem para o formulário -->

        <!-- Formulário de Motivo da Consulta -->
        <div class="card mb-4">
          <div class="card-header custom-card-header no-border-header font-weight-bold">
            <i class="fas fa-question"></i> Motivo da Consulta
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button class="btn btn-primary custom-button-listas btn-sm m-2"
                      *ngFor="let motivo of motivos"
                      (click)="removerMotivo(motivo)">
                      <i class="fas fa-times me-1"></i> {{ motivo }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">
                  <input type="text" class="form-control"
                    [(ngModel)]="motivosSelecionada"
                    placeholder="Digite o motivo da consulta"
                    [class.invalid]="motivoInvalido && !motivosSelecionada"
                    (keyup.enter)="adicionarMotivo()">
                  <div class="input-group-append">
                    <button class="btn btn-primary w-100 custom-button custom-button"
                      type="button"
                      (click)="adicionarMotivo();">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulário de Sintomas -->
        <div class="card mb-4">
          <div
            class="card-header custom-card-header font-weight-bold no-border-header">
            <i class="fas fa-heartbeat"></i> Sintomas
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button
                      class="btn btn-primary custom-button-listas btn-sm m-2"
                      *ngFor="let sintoma of sintomasAdicionados"
                      (click)="removerSintoma(sintoma)">
                      <i class="fas fa-times me-1"></i> {{ sintoma }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">

                  <input type="text" class="form-control"
                    [(ngModel)]="sintomaSelecionado"
                    [formControl]="sintomaControl"
                    placeholder="Digite os sintomas"
                    [class.invalid]="sintomasInvalido && !sintomaSelecionado"
                    (keyup.enter)="adicionarSintoma()"
                    [matAutocomplete]="auto">
                  <mat-autocomplete #auto="matAutocomplete">

                    <mat-option
                      *ngFor="let sugestao of filteredSintomas | async"
                      [value]="sugestao">
                      {{ sugestao }}
                    </mat-option>
                  </mat-autocomplete>

                  <div class="input-group-append">
                    <button class="btn custom-button"
                      type="button" (click)="adicionarSintoma()">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulário de Cirurgias -->
        <div class="card mb-4">
          <div
            class="card-header custom-card-header font-weight-bold no-border-header">
            <i class="fas fa-procedures"></i> Cirurgias Anteriores
          </div>
          <div class="card-body mb-4">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button
                      class="btn btn-primary  custom-button-listas btn-sm m-2"
                      *ngFor="let cirurgia of cirurgiasAnteriores"
                      (click)="removerCirurgia(cirurgia)">
                      <i class="fas fa-times me-1"></i> {{ cirurgia }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">
                  <input type="text" class="form-control"
                    [(ngModel)]="cirurgiaSelecionada"
                    placeholder="Digite as cirurgias"
                    [class.invalid]="cirurgiasInvalido && !cirurgiaSelecionada"
                    (keyup.enter)="adicionarCirurgia()">
                  <div class="input-group-append">
                    <button class="btn btn-primary   custom-button"
                      type="button" (click)="adicionarCirurgia()">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulário de Doenças Prévias -->
        <div class="card mb-4">
          <div
            class="card-header custom-card-header font-weight-bold no-border-header">
            <i class="fas fa-notes-medical"></i> Doenças Prévias
          </div>
          <div class="card-body mb-4">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button
                      class="btn btn-primary   custom-button-listas btn-sm m-2"
                      *ngFor="let doenca of doencasPrevias"
                      (click)="removerDoencaPrevia(doenca)">
                      <i class="fas fa-times me-1"></i> {{ doenca }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">

                  <input type="text" class="form-control"
                    [(ngModel)]="doencaPreviaSelecionada"
                    [formControl]="doencasControl"
                    placeholder="Digite as doenças"
                    [class.invalid]="doencasInvalido && !doencaPreviaSelecionada"
                    (keyup.enter)="adicionarDoencaPrevia()"
                    [matAutocomplete]="doencasAuto">
                  <mat-autocomplete #doencasAuto="matAutocomplete">
                    <mat-option *ngFor="let sugestao of filteredDoencas | async"
                      [value]="sugestao">
                      {{ sugestao }}
                    </mat-option>
                  </mat-autocomplete>

                  <div class="input-group-append">
                    <button class="btn btn-primary   custom-button"
                      type="button" (click)="adicionarDoencaPrevia()">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulário de Medicamentos em Uso -->
        <div class="card mb-4">
          <div
            class="card-header custom-card-header font-weight-bold no-border-header">
            <i class="fas fa-prescription-bottle"></i> Medicamentos em Uso
          </div>
          <div class="card-body mb-4">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button
                      class="btn btn-primary custom-button-listas btn-sm m-2"
                      *ngFor="let medicamento of medicamentosEmUso"
                      (click)="removerMedicamentoEmUso(medicamento)">
                      <i class="fas fa-times me-1"></i> {{ medicamento }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">
                  <input type="text" class="form-control"
                    [(ngModel)]="medicamentoSelecionado"
                    placeholder="Digite os medicamentos"
                    [class.invalid]="medicamentosInvalido && !medicamentoSelecionado"
                    (keyup.enter)="adicionarMedicamentoEmUso()">
                  <div class="input-group-append">
                    <button class="btn btn-primary   custom-button"
                      type="button" (click)="adicionarMedicamentoEmUso()">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulário de Comportamento -->
        <div class="card mb-4">
          <div
            class="card-header custom-card-header font-weight-bold no-border-header">
            <i class="fas fa-paw"></i> Comportamento
          </div>
          <div class="card-body mb-4">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button
                      class="btn btn-primary  custom-button-listas btn-sm m-2"
                      *ngFor="let comportamento of comportamentos"
                      (click)="removerComportamento(comportamento)">
                      <i class="fas fa-times me-1"></i> {{ comportamento }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">
                  <input type="text" class="form-control"
                    [(ngModel)]="comportamentoSelecionado"
                    placeholder="Digite os comportamentos"
                    [class.invalid]="comportamentoInvalido && !comportamentoSelecionado"
                    (keyup.enter)="adicionarComportamento()">
                  <div class="input-group-append">
                    <button class="btn btn-primary   custom-button"
                      type="button" (click)="adicionarComportamento()">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulário de Reprodução -->
        <div class="card mb-4">
          <div
            class="card-header custom-card-header font-weight-bold no-border-header">
            <i class="fas fa-venus-mars"></i> Reprodução
          </div>
          <div class="card-body mb-4">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button
                      class="btn btn-primary custom-button-listas btn-sm m-2"
                      *ngFor="let reproducao of reproducao"
                      (click)="removerReproducao(reproducao)">
                      <i class="fas fa-times me-1"></i> {{ reproducao }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">
                  <input type="text" class="form-control"
                    [(ngModel)]="reproducaoSelecionada"
                    placeholder="Digite os detalhes da reprodução"
                    [class.invalid]="reproducaoInvalido && !reproducaoSelecionada"
                    (keyup.enter)="adicionarReproducao()">
                  <div class="input-group-append">
                    <button class="btn btn-primary   custom-button"
                      type="button" (click)="adicionarReproducao()">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Formulário de Viagem -->
        <div class="card mb-4">
          <div
            class="card-header custom-card-header font-weight-bold no-border-header">
            <i class="fas fa-suitcase-rolling"></i> Viagem
          </div>
          <div class="card-body mb-4">
            <div class="row">
              <div class="col-md-12">
                <div class="mt-3">
                  <div class="d-flex flex-wrap">
                    <button
                      class="btn btn-primary custom-button-listas btn-sm m-2"
                      *ngFor="let viagem of viagens"
                      (click)="removerViagem(viagem)">
                      <i class="fas fa-times me-1"></i> {{ viagem }}
                    </button>
                  </div>
                </div>
                <div class="input-group mt-3">
                  <input type="text" class="form-control"
                    [(ngModel)]="viagemSelecionada"
                    placeholder="Digite os detalhes da viagem"
                    [class.invalid]="viagemInvalido && !viagemSelecionada"
                    (keyup.enter)="adicionarViagem()">
                  <div class="input-group-append">
                    <button class="btn btn-primary   custom-button"
                      type="button" (click)="adicionarViagem()">
                      <i class="fas fa-plus"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <br>

        <div class="d-flex justify-content-between">

          <button class="btn btn-primary custom-button-consulta" type="button"
            style="visibility: hidden; pointer-events: none;"
            (click)="ativarSuporteDiagnostico()">
            Consultar suporte ao Diagnóstico
          </button>

          <button class="btn btn-primary custom-button" type="button"
            (click)="cadastrarAnamnese()">
            Salvar
          </button>

        </div>

      </div>
    </div>

  </div>

  <!--Fim do Formulário -->

  <!-- Coluna à Direita -->
  <div class="col-md-4">
    <div class="accordion" id="accordionPanelsStayOpenExample">
      <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-headingOne">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
            <h3 style="margin: 0;">Informações do Pet</h3>
          </button>
        </h2>
        <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
          <div class="accordion-body">
            <div class="row">
              <div class="col-md-6">
                <div class="text-left">
                  <p><strong>Pet:</strong> {{ cliente.pet.nome }}</p>
                  <p><strong>Sexo:</strong> {{ cliente.pet.sexo }}</p>
                  <p><strong>Idade:</strong> {{ cliente.pet.idade }}</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="text-left">
                  <p><strong>Espécie:</strong> {{ cliente.pet.especie }}</p>
                  <p><strong>Raça:</strong> {{ cliente.pet.raca }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
            <h3 style="margin: 0;">Histórico</h3>
          </button>
        </h2>
        <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
          <div class="accordion-body">
            <div style="max-height: 500px; overflow-y: scroll;">
              <div id="timeline">
                <div class="timeline-container">
                  <section class="py-5">
                    <ul class="timeline-with-icons">
                      <li class="timeline-item mb-5" *ngFor="let anamnese of anamneses">
                        <div class="timeline-clickable" (click)="logAnamneseId(anamnese.id)">
                          <span class="timeline-icon">
                            <i class="fas fa-file-archive timeline-icon-size hoverable" style="color:#0089e3;"></i>
                          </span>
                        </div>
                        <h5 class="fw-bold text-center">Data: {{ anamnese.dataCriacao }}</h5>
                        <p class="text-muted mb-2 fw-bold text-center">Motivo Da Consulta: {{ anamnese.motivoDaConsulta }}</p>
                        <p class="text-muted text-center">Sintomas: {{ anamnese.sintomas }}</p>
                        <p style="color: #ffff;">id: {{ anamnese.id }}</p>
                      </li>
                    </ul>
                  </section>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>



</div>




